if (self.CavalryLogger) { CavalryLogger.start_js(["WOubm"]); }

__d("XTaggingCounterController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/composer/tagging/counter/",{event:{type:"Enum",required:true,enumType:1}})}),null);
__d("MTaggingCounter",["AsyncSignal","XTaggingCounterController"],(function a(b,c,d,e,f,g,h,i){var j={logEvent:function k(event,l){var m=i.getURIBuilder().setEnum("event",event).getURI();new h(m).send()}};f.exports=j}),null);
__d("isEmpty",["invariant"],(function a(b,c,d,e,f,g,h){"use strict";function i(k){if(Array.isArray(k))return k.length===0;else if(typeof k==="object"){if(k){!j(k)||k.size===undefined||h(0);for(var l in k)return false}return true}else return!k}function j(k){if(typeof Symbol==="undefined")return false;return k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]}f.exports=i}),18);
__d("MFeedAdsGapRuleViolationDetection",["Banzai","BanzaiODS","CSS","DataAttributeUtils","DOM","ge","isEmpty"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o="ei",p="qid",q="gap rule violation",r="non violating ads gap",s="non violating ego gap",t="first position violation",u="feed load",v="spacing invalidation",w="ego_pymk",x="ego_other",y=[],z=[],A=[],B=[],C={},D={},E={},F=[],G={registerFeedStories:function H(I){var J=m(I.containerID);if(J==null||J.childNodes==null)return;C=babelHelpers["extends"]({},I.demoAdChecks,C);E=I.egoGapRule;F=I.invalidateEgo?I.egoStories:{};var K=this._getStoriesFromContainer(J);if(I.isLoggingEnabled&&K.length!==0)this._logFeedLoad();y=y.concat(K);for(var L in I.minGaps)if(Object.prototype.hasOwnProperty.call(I.minGaps,L))D[L]=I.minGaps[L];if(n(C)){if(I.isLoggingEnabled)this._checkFirstPosViolation(I,J);if(I.invalidateEgo||I.isLoggingEnabled||I.isGapRuleInvalidationEnabled)this._checkGapRuleViolation(I)}},_getStoriesFromContainer:function H(I){var J=[];for(var K=0;K<I.childNodes.length;K++){var L=this._convertStoryNodeToObject(I.childNodes[K]);if(L!==null)J.push(L)}return J},_convertStoryNodeToObject:function H(I){var J=I.getAttribute("data-dedupekey"),K=[k.getDataFt(I)];if(K[0]==null)return null;var L=JSON.parse(K[0]);return{dataFTArray:K,dedupKey:J,isSponsored:!!L[o],isEgoPymk:F[J]===w,isEgoOther:F[J]===x,height:I.offsetHeight,qid:parseInt(L[p],10),nodeID:I.id}},_checkFirstPosViolation:function H(I,J){if(y.length>0&&y[0].isSponsored){var K={ftArray:y[0].dataFTArray,qid:y[0].qid,nodeid:y[0].nodeID};if(I.isLoggingEnabled&&!(y[0].dedupKey in B)){this._logFirstPosViolation(K);B[y[0].dedupKey]=K}}},_getMinGap:function H(I,J,K){var L=Math.min(I?I:Number.MAX_VALUE,J?J:Number.MAX_VALUE);return L!==Number.MAX_VALUE?L:K},_getStoryDedupKeysJSONString:function H(I,J){var K=[];for(var L=I;L<=J;L++)K.push(y[L].dedupKey);return JSON.stringify(K)},_getStoryDedupKeys:function H(){return y.map(function(I){return I.dedupKey})},_checkGapRuleViolation:function H(I){var J=null,K=null,L=null;for(var M=0;M<y.length;M++){var N=y[M];if(N.isSponsored){var O=false,P=false;if(J!==null){var Q=M-K,R=null,S=null;if(J===K)S=this._getMinGap(D[L.dedupKey],D[N.dedupKey],I.defaultMinGap);else S=this._getMinGapBetweenStories(L,N);var T=null;if(Q<S){R=q;T=K}else{R=r;T=J}if(I.isLoggingEnabled)if(!(N.dedupKey in z)||z[N.dedupKey].event_type!==R){this._logGapEvent(R,T,M);z[N.dedupKey]={event_type:R}}if(I.isGapRuleInvalidationEnabled&&R==q){this._invalidateGapRuleViolatedAd(L,N);O=true;y.splice(M--,1)}}if(!O&&!P){J=M;K=M;L=N}}if(I.invalidateEgo&&(N.isEgoPymk||N.isEgoOther)){var U=false;if(K!==null){Q=M-K;S=this._getMinGapBetweenStories(L,y[M]);if(Q<S){U=true;var V=S-Q,W=-1;for(var X=M+1;X<y.length;X++){if(y[X].isSponsored||y[X].isEgoPymk||y[X].isEgoOther)break;else V--;if(V===0){W=X;break}}if(W>0)this._swapAndLogEgo(M,X);else{this._invalidateAndLogEgo(M);M--}}else if(I.shouldLogEgo&&!A[N.dedupKey]){A[N.dedupKey]=true;this._logGapEvent(s,K,M)}}if(!U){K=M;L=N}}}},_getMinGapBetweenStories:function H(I,J){var K="";if(I.isSponsored||I.isEgoOther)K="ad";else if(I.isEgoPymk)K="pymk";else return 0;var L="";if(J.isSponsored||J.isEgoOther)L="ad";else if(J.isEgoPymk)L="pymk";else return 0;return E[K+"_"+L]},_swapAndLogEgo:function H(I,J){this._shiftEgoBelowOrganicStory(y[I].nodeID,y[J].nodeID);var K=y[I];y.splice(I,1);y.splice(J,0,K);i.bumpEntityKey("m_feed_ego_invalidation","swap")},_shiftEgoBelowOrganicStory:function H(I,J){var K=m(I),L=m(J);K&&L&&l.insertAfter(L,K)},_invalidateAndLogEgo:function H(I){var J=m(y[I].nodeID);J&&j.hide(J);y.splice(I,1);i.bumpEntityKey("m_feed_ego_invalidation","invalidate")},_logFirstPosViolation:function H(I){var J={ft:I.ftArray[0],event_type:t,intValues:{qid:I.qid}};if(I.error_msg)J.error_msg=I.error_msg;h.post("feed_ads_gap_rule_violation",J)},_logGapEvent:function H(I,J,K){if(J===null)return;var L=y[J],M=y[K],N=0;for(var O=J+1;O<K;O++)N+=y[O].height;var P={ft_A:L.dataFTArray[0],ft_B:M.dataFTArray[0],event_type:I,intValues:{dist:K-J,pdist:N,pos:K+1,qid_A:L.qid,qid_B:M.qid},strValues:{previous_unit_type:this._getUnitTypeForLogging(L),unit_type:this._getUnitTypeForLogging(M)},dedup_keys:this._getStoryDedupKeysJSONString(J,K)};h.post("feed_ads_gap_rule_violation",P)},_getUnitTypeForLogging:function H(I){if(I.isSponsored)return"ad";else if(I.isEgoPymk)return"pymk";else if(I.isEgoOther)return"ego_other";return null},_logFeedLoad:function H(){var I={event_type:u};h.post("feed_ads_gap_rule_violation",I)},_invalidateGapRuleViolatedAd:function H(I,J){var K=m(J.nodeID);K&&j.hide(K);var L={ft_array_A:I.dataFTArray[0],ft_array_B:J.dataFTArray[0],event_type:v};h.post("feed_ads_gap_rule_violation",L)}};f.exports=G}),null);
__d("MFeedErrorDetection",["Banzai","DataAttributeUtils"],(function a(b,c,d,e,f,g,h,i){"use strict";var j={};function k(event,m,n,o){var p={event:event,shouldLogDetail:m,site:"mtouch"};if(m){p.intValues=n;p.normalValues=o}h.post("feed_error_detection",p,{delay:0})}var l={registerFeedStory:function m(n){var o=n.feedObjectElement,p=n.shouldLogDetail;if(!o)return;var q=i.getDataFt(o),r=o.getAttribute("data-dedupekey");if(!r||!q)return;if(j[r]){var s=void 0;if(p)s={dedupKey:r,ft_A:q,ft_B:j[r]};k("mtouch_duplicate_stories",p,{},{dup_field:s||{}})}else j[r]=q}};f.exports=l}),null);
__d("MSnowflakeLink",["DataAttributeUtils","DOM","MModalDialog","URI","MLinkHack","Parent","Stratcom","destroyOnUnload"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(q){"use strict";this.$MSnowflakeLink1=false;this.$MSnowflakeLink2=q.node;this.$MSnowflakeLink3=q.permalink;this.$MSnowflakeLink4=q.setToken;this.$MSnowflakeLink5=q.targetPhoto;this.$MSnowflakeLink6=i.listen(q.node,"click",null,this.onClick.bind(this));o(function(){return this.$MSnowflakeLink6.remove()}.bind(this));this.$MSnowflakeLink7()}p.prototype.getFeedTrackingOwnerID=function(){"use strict";var q=h.getClickTrackingParent(this.$MSnowflakeLink2);return q&&q.id};p.prototype.getPermalinkURI=function(){"use strict";return new k(this.$MSnowflakeLink3).addQueryData("photo_id",this.$MSnowflakeLink5)};p.prototype.getModalDialogURI=function(){"use strict";return new k(this.$MSnowflakeLink2.getAttribute("href")).addQueryData("cached_data",this.$MSnowflakeLink1).addQueryData("ftid",this.getFeedTrackingOwnerID())};p.prototype.onClick=function(q){"use strict";l.remove(this.$MSnowflakeLink2);j.openWithPermalinkURI(this.getModalDialogURI().toString(),this.getPermalinkURI());q.kill()};p.prototype.$MSnowflakeLink7=function(){"use strict";if(!this.$MSnowflakeLink4){this.$MSnowflakeLink1=true;return}var q=n.listen("m:photosetstore:update",null,function(event){var r=(event.getData()||{}).set_token;if(!q||r!=this.$MSnowflakeLink4)return;this.$MSnowflakeLink1=true;q.remove();q=null}.bind(this));o(function(){return q&&q.remove()})};f.exports=p}),null);
__d("MShareAngoraAttachment",["Stratcom"],(function a(b,c,d,e,f,g,h){var i=false,j=function j(k){if(i)return;i=true;window.addEventListener("error",function(event){if(event.target.nodeName=="IMG"){for(var l=event.target;l!=document.body&&!h.hasSigil(l,"shareAngoraAttachmentMedia");l=l.parentNode);if(l!=document.body)l.style.display="none"}},true)};g.registerDeadImageListener=j}),null);
__d("MExposeMore",["CSS","DOM","Stratcom"],(function a(b,c,d,e,f,g,h,i,j){"use strict";var k=[];function l(){while(k.length)k.pop().remove()}var m="expose";j.listen("click",[m,"more"],function(event){var o=event.getNode(m);h.conditionClass(o,"text_exposed",true);event.prevent()});var n={showMessageSuffixOnClick:function o(p,q){if(q.children.length!==0){if(!k.length)k.push(j.listen("m:page:unload",null,l));var r=i.scry(p,"*","more")[0];if(r)k.push(i.listen(r,"click",null,function(event){h.show(q);event.prevent()}))}}};f.exports=n}),null);
__d("MTaggingCounterEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({GEO_PANEL_LOAD:"geo_panel_load",GEO_PANEL_ACCEPT:"geo_panel_accept",GEO_PANEL_DENY:"geo_panel_deny",GEO_PANEL_FAIL:"geo_panel_fail",GEO_PANEL_SUCCESS:"geo_panel_success",GEO_POPUP_LOAD:"geo_popup_load",GEO_POPUP_FAIL:"geo_popup_fail",GEO_POPUP_SUCCESS:"geo_popup_success"})}),null);
__d("ViewerLocationSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({AURA:"aura",GET_PARAM:"get_param",INTERN_TOOL:"intern_tool",LAST_LOCATION:"last_location",LOGIN:"login",PLACEBOOK:"placebook",PLACES_FQL:"places_fql",TEST:"test",MSITE_LOCATION_PROMPT:"msite_location_prompt",MSITE_PERSISTENT_LOCATION:"msite_persistent_location",MSITE_PLACES:"msite_places",MSITE_UNKNOWN:"msite_unknown",CORE_GQL_MUTATION:"core_graphql_mutation",MULTIFEED_PARAM:"multifeed_param",LOCATION_PROFILE_FRAMES:"location_profile_frames",PR_LOCATION_EFFECTS:"pr_location_effects",MESSENGER_LIVE_LOCATION:"messenger_live_location",VISIT_STATE:"visit_state",WIFI_FINGERPRINT:"wifi_fingerprint",INFERRED_WIFI:"inferred_wifi",INSTA_GEO_IMPLICIT:"insta_geo_implicit",AURA_TOO_FAST:"aura_too_fast",AURA_TOO_OLD:"aura_old",AURA_FAILED_MGI:"aura_failed_mgi"})}),null);
__d("XPlacesUpdateLocationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/places/location_update/",{json_location:{type:"String"},source:{type:"Enum",defaultValue:"msite_unknown",enumType:1}})}),null);
__d("MLocationPrompt",["DOM","MRequest","Stratcom","WebStorage","XPlacesUpdateLocationController","MTaggingCounter","MTaggingCounterEvent","ViewerLocationSource"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=["latitude","longitude","accuracy","altitude","altitudeAccuracy","heading","speed"],q={enableHighAccuracy:true,timeout:6e4,maximumAge:3e5},r=6e4;s.init=function(t,u,v,w){"use strict";return new s(t,u,v,w)};s.getCoords=function(){"use strict";return s.coords};s.isLocationAvailable=function(){"use strict";return s.locationAvailable};function s(t,u,v,w){"use strict";this.lastUpdateTime=0;this.container=t;this.question=u;this.loading=v;this.errored=w;var x=k.getLocalStorage();if(x&&x.getItem(s.GEOLOCATION_KEY)==="1")this.$MLocationPrompt1();else{s.locationAvailable=false;h.show(this.question);h.hide(this.loading);h.hide(this.errored);h.show(this.container);j.invoke("m:jewel-set:notifications-jewel:refresh-flyout");m.logEvent(n.GEO_PANEL_LOAD)}this.listeners=[j.listen("click","accept-location",this.$MLocationPrompt2.bind(this)),j.listen("click","deny-location",this.$MLocationPrompt3.bind(this)),j.listen("m:page:unload",null,this.$MLocationPrompt4.bind(this))]}s.prototype.clearWatch=function(){"use strict";if(!this.watchID)return;navigator.geolocation.clearWatch(this.watchID);this.watchID=null};s.prototype.$MLocationPrompt2=function(){"use strict";m.logEvent(n.GEO_PANEL_ACCEPT);this.$MLocationPrompt1(true)};s.prototype.$MLocationPrompt1=function(t){"use strict";s.locationAvailable=true;var u=k.getLocalStorage();if(u)u.setItem(s.GEOLOCATION_KEY,"1");h.show(this.container);h.hide(this.question);h.show(this.loading);h.hide(this.errored);j.invoke("m:jewel-set:notifications-jewel:refresh-flyout");var v=setTimeout(this.$MLocationPrompt5,q.timeout);this.watchID=navigator.geolocation.watchPosition(function(w){if(t)m.logEvent(n.GEO_PANEL_SUCCESS);clearTimeout(v);this.$MLocationPrompt6(w)}.bind(this),function(w){if(t)m.logEvent(n.GEO_PANEL_FAIL);clearTimeout(v);this.$MLocationPrompt5(w)}.bind(this),q);j.invoke(s.STRATCOM_ACCEPT)};s.prototype.$MLocationPrompt3=function(){"use strict";s.locationAvailable=false;m.logEvent(n.GEO_PANEL_DENY);h.hide(this.container);j.invoke("m:jewel-set:notifications-jewel:refresh-flyout");j.invoke(s.STRATCOM_DENY)};s.prototype.$MLocationPrompt6=function(t){"use strict";s.locationAvailable=true;if(t){var u={},v;for(var w=0;w<p.length;w++){v=p[w];if(t.coords[v])u[v]=t.coords[v]}if(t.timestamp)u.timestamp=t.timestamp/1e3;this.$MLocationPrompt7(JSON.stringify(u));h.hide(this.container);s.coords=u;j.invoke("m:jewel-set:notifications-jewel:refresh-flyout");j.invoke(s.STRATCOM_UPDATE,null,{position:t})}};s.prototype.$MLocationPrompt5=function(t){"use strict";s.locationAvailable=false;this.clearWatch();var u=k.getLocalStorage();if(u)u.setItem(s.GEOLOCATION_KEY,"0");h.show(this.container);h.hide(this.question);h.hide(this.loading);h.show(this.errored);j.invoke("m:jewel-set:notifications-jewel:refresh-flyout");j.invoke(s.STRATCOM_FAIL,null,{error:t});m.logEvent(n.GEO_PANEL_FAIL)};s.prototype.$MLocationPrompt7=function(t){"use strict";var u=Date.now();if(u-this.lastUpdateTime>r){this.lastUpdateTime=u;var v=l.getURIBuilder().setString("json_location",t).setEnum("source",o.MSITE_LOCATION_PROMPT).getURI();new i(v).setMethod("POST").send()}};s.prototype.$MLocationPrompt4=function(){"use strict";if(!this.listeners)return;for(var t=0;t<this.listeners.length;t++)this.listeners[t].remove();this.listeners=[]};Object.assign(s,{STRATCOM_ACCEPT:"MLocationPrompt/accept",STRATCOM_DENY:"MLocationPrompt/deny",STRATCOM_UPDATE:"MLocationPrompt/update",STRATCOM_FAIL:"MLocationPrompt/fail",GEOLOCATION_KEY:"authorizeGeolocation",locationAvailable:undefined});f.exports=s}),null);
__d("MMoreItemAutomatic",["MLocationPrompt","MPageCache","MPageControllerPath","MRequest","MRequestGateway","MRequestTypes","MResponseData","MStopNGo","MURI","MViewport","Stratcom","Vector","createDeprecatedProperties","throttle"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(w){"use strict";this._onScrollPrefetch=function(){if(this._insertWhileScrolling)this._onGo();else if(!this._itemsLoaded&&!this._requestSent)this._sendRequestIfScrolledDown()}.bind(this);this._href=w.href;this._sendGeolocation=w.sendGeolocation;this._proximityPages=w.proximity_pages||7;this._loggerID=w.logger_id;this._loggerName=w.logger_name;this._loadImmediately=w.load_first_immediately;this._retryOnError=w.retryOnError;this._addToCache=w.addToCache;this._alwaysProcess=w.alwaysProcess;this._scrollPrefetchThrottleFreq=w.scrollPrefetchThrottleFreq||0;this._insertWhileScrolling=w.insertWhileScrolling;var x=document.getElementById(w.id);if(x){this._verticalOffset=s.getPos(x).y;this.setMoreItem(x);this.setPersistOnReload(w.persist_on_reload);this._setUpSendRequest()}else this.uninstall()}v.prototype.isElementVisible=function(){"use strict";if(!this._isElementRendered())return false;var w,x=this.getMoreItem();if("getBoundingClientRect"in x){var y=x.getBoundingClientRect(),z=y.width/10,A=y.height/10,B=y.left,C=y.right,D=y.top,E=y.bottom,F;while(F!==x&&B<=C&&D<=E){B+=z;D+=A;F=document.elementFromPoint(Math.round(B),Math.round(D))}w=F===x}else{var G=s.getPos(x).y,H=G+s.getDim(x).y,I=q.getScrollTop(),J=I+q.getUseableHeight();w=G<=J&&H>=I}return w};v.prototype._checkScrolledIntoFetched=function(){"use strict";var w=this.getMoreItem();if(w)if(this._verticalOffset-q.getScrollTop()<0){r.invoke("m:more_item_automatic:items_visible",this._loggerID);this.uninstall()}};v.prototype._onGo=function(){"use strict";if(!this._itemsLoaded){this._readyToUpdate=true;if(this.isElementVisible())r.invoke("m:more_item_automatic:spinner_visible",this._loggerID);if(!this._requestSent)this._sendRequestIfScrolledDown();else this._updateItems()}else this._checkScrolledIntoFetched()};v.prototype._onStop=function(){"use strict";if(!this._itemsLoaded)this._readyToUpdate=false};v.prototype._onAjaxPageLoad=function(){"use strict";if(!this._requestSent&&(this._loadImmediately||this.isElementVisible())){this._sendRequest();this._loadImmediately=false}};v.prototype._setUpSendRequest=function(){"use strict";if(!this._requestSent&&(this._loadImmediately||this.isElementVisible())){this._sendRequest();this._loadImmediately=false}this._listeners=[];if(this._scrollPrefetchThrottleFreq>0)this._listeners.push(r.listen(["m:page:render:complete","scroll"],null,u.withBlocking(this._onScrollPrefetch,this._scrollPrefetchThrottleFreq,this)));if(!this._insertWhileScrolling)this._listeners.push(o.listen("go",this._onGo.bind(this)),o.listen("stop",this._onStop.bind(this)));this._listeners.push(r.listen("m:ajax:complete",null,this._onAjaxPageLoad.bind(this)))};v.prototype._existsOnPage=function(){"use strict";var w=this.getMoreItem();return w?document.documentElement.contains(w):false};v.prototype.uninstall=function(){"use strict";while(this._listeners&&this._listeners.length)this._listeners.pop().remove();this._requestSent=false;this._prefetchResponse=null;this.setMoreItem(null);this.setPersistOnReload(false);clearTimeout(this._retryTimeout);clearTimeout(this._sendTimeout)};v.prototype.withinProximity=function(){"use strict";var w=this.getMoreItem();return w&&s.getPos(w).y-q.getScrollTop()<q.getUseableHeight()*(1+this._proximityPages)};v.prototype._updateItems=function(){"use strict";if(this._prefetchResponse){if(this._existsOnPage()){this._prefetchResponse.process();if(this._addToCache)i.addCachedIUIResponse(j.getRequestPath(),this._prefetchResponse)}r.invoke("m:more_item_automatic:items_loaded",this._loggerID);this._itemsLoaded=true}};v.prototype._isElementRendered=function(){"use strict";var w=this.getMoreItem();if(!w||!w.offsetHeight)return false;return true};v.prototype._sendRequestIfScrolledDown=function(){"use strict";if(this.isElementVisible()||this._isElementRendered()&&q.getScrollTop()>100&&this.withinProximity())this._sendRequest()};v.prototype._sendRequest=function(){"use strict";var w=h.getCoords();if(this._sendGeolocation&&w)this._href=new p(this._href).addQueryData("lat",w.latitude).addQueryData("long",w.longitude).toString();var x=new k(new p(this._href).toString());if(this._alwaysProcess)x.setType(m.INDEPENDENT);else x.setType(m.DEPENDENT);x.setAutoProcess(false);var y=[],z=false,A=function A(){if(!z&&y.length){z=true;y.shift().process()}};if(this._retryOnError){x.setTimeout(l.ERROR_TIMEOUT);x.listen("error",function(B,C){this._retryTimeout=setTimeout(function(){if(navigator.onLine){C.reset();C.addData({is_retry:1});C.sendAfterProcessing()}}.bind(this),v.TRY_AGAIN_DELAY)})}x.listen("response",function(B){B=new n(B);B.listen("complete",function(){z=false;A()});if(B.isPagelet()){y.push(B);A();return}z=true;this._prefetchResponse=B;if(this._readyToUpdate)this._updateItems()}.bind(this));x.send();this._requestSent=true};t(v,{moreItem:null,persistOnReload:false});Object.assign(v.prototype,{_requestSent:false,_readyToUpdate:true,_moreStartTime:0,_moreLogged:false,_proximityPages:null,_prefetchResponse:null,_listeners:null,_href:null,_loggerName:null,_loggerID:null,_itemsLoaded:false,_verticalOffset:0});Object.assign(v,{TRY_AGAIN_DELAY:1500});f.exports=v}),null);
__d("InitMMoreItemAutomatic",["MMoreItemAutomatic","Stratcom"],(function a(b,c,d,e,f,g,h,i){var j,k=function k(l){if(!j){j={};i.listen("m:page:loading",null,function(n){for(var o in j)if(!j[o].getPersistOnReload()){j[o].uninstall();delete j[o]}})}var m=l.id;if(j[m])j[m].uninstall();j[m]=new h(l)};g.main=k}),null);
__d("MMoreItemAutomaticLogger",["Stratcom","MarauderLogger"],(function a(b,c,d,e,f,g,h,i){function j(k,l){this._loggerName=k;this._loggerID=l;this._listeners=[h.listen("m:page:unload",null,this._pageUnload.bind(this)),h.listen("m:more_item_automatic:spinner_visible",null,this._onSpinnerVisible.bind(this)),h.listen("m:more_item_automatic:items_loaded",null,this._onItemsLoaded.bind(this)),h.listen("m:more_item_automatic:items_visible",null,this._onItemsVisible.bind(this))]}Object.assign(j.prototype,{_loggerName:"",_loggerID:"",_spinnerUnloaded:false,_spinnerVisible:false,_spinnerStartTime:null,_cleanup:function k(){while(this._listeners&&this._listeners.length)this._listeners.pop().remove()},_pageUnload:function k(){if(this._spinnerVisible){this._spinnerUnloaded=true;this._logLoadingSpinnerTime(this._getTimeSpan(),true)}this._cleanup()},_onSpinnerVisible:function k(event){if(event.getPath()[0]===this._loggerID&&!this._spinnerVisible){this._spinnerVisible=true;this._spinnerStartTime=Date.now()}},_onItemsLoaded:function k(event){if(event.getPath()[0]===this._loggerID&&!this._spinnerUnloaded){this._logLoadingSpinnerTime(this._getTimeSpan(),false);this._spinnerVisible=false;this._spinnerStartTime=null}},_onItemsVisible:function k(event){if(event.getPath()[0]===this._loggerID)this._logItemsVisible()},_getTimeSpan:function k(){return this._spinnerVisible?Date.now()-this._spinnerStartTime:0},_logLoadingSpinnerTime:function k(l,m){i.log("m_more_items_automatic_spinner_visible_time",undefined,{name:this._loggerName,id:this._loggerID,visible_time:l,spinner_unloaded:m})},_logItemsVisible:function k(){i.log("m_more_items_automatic_fetched_items_visible",undefined,{name:this._loggerName,id:this._loggerID});this._cleanup()}});j.init=function(k,l){new j(k,l)};f.exports=j}),null);
__d("MLinkshim",["$","setTimeoutAcrossTransitions","AsyncSignal","Stratcom","MLegacyDataStore","LinkshimHandlerConfig"],(function a(b,c,d,e,f,g,h,i,j,k,l,m){var n="MLinkshim",o={onClick:function p(q){var r=q.getNode(n),s=l.get(r);o.click(r,s.dest_uri,s.logging_uri)},click:function p(q,r,s){var t=h("meta_referrer");t.content=m.switched_meta_referrer_policy;q.href=r;i(function(){t.content=m.default_meta_referrer_policy;new j(s,{}).send()},100)}};k.listen("click",n,o.onClick);f.exports=o}),null);
__d("MScrollAreaHelper",["MLegacyDataStore"],(function a(b,c,d,e,f,g,h){function i(j,k){k=k||10;var l;while(k>0&&j&&j.nodeType===1){l=h.get(j);if(l&&l.scrollArea)return l.scrollArea;j=j.parentNode;k--}return null}g.findScrollArea=i}),null);